{{ define "main" }}
  <section class="hero">
    <h1>{{ .Site.Title }}</h1>
    <div class="markdown">
      {{ .Content }}
    </div>
  </section>

  <section class="documentation-overview">
    <h2>📚 Documentation Categories</h2>

    <div class="cards-grid">
      <div class="card">
        <h3>🔒 Legal & Privacy</h3>
        <p>Privacy policies, GDPR compliance, and terms of use for LeafLock users.</p>
        <ul class="doc-list">
          {{ range where (where .Site.RegularPages "Section" "pages") ".Params.categories" "intersect" (slice "Legal") }}
            <li>
              <a href="{{ .RelPermalink }}">
                <h4>{{ .LinkTitle }}</h4>
                {{ with .Params.summary }}<p>{{ . }}</p>{{ end }}
              </a>
            </li>
          {{ end }}
        </ul>
      </div>

      <div class="card">
        <h3>⚙️ Administration</h3>
        <p>Guides for administrators managing LeafLock instances and users.</p>
        <ul class="doc-list">
          {{ range where (where .Site.RegularPages "Section" "pages") ".Params.categories" "intersect" (slice "Administration") }}
            <li>
              <a href="{{ .RelPermalink }}">
                <h4>{{ .LinkTitle }}</h4>
                {{ with .Params.summary }}<p>{{ . }}</p>{{ end }}
              </a>
            </li>
          {{ end }}
        </ul>
      </div>

      <div class="card">
        <h3>💻 Development</h3>
        <p>Technical documentation for developers working with LeafLock.</p>
        <ul class="doc-list">
          {{ range where (where .Site.RegularPages "Section" "pages") ".Params.categories" "intersect" (slice "Development") }}
            <li>
              <a href="{{ .RelPermalink }}">
                <h4>{{ .LinkTitle }}</h4>
                {{ with .Params.summary }}<p>{{ . }}</p>{{ end }}
              </a>
            </li>
          {{ end }}
        </ul>
      </div>
    </div>
  </section>

  <section class="all-documentation">
    <h2>📖 All Documentation</h2>
    <ul class="list">
      {{ range sort (where .Site.RegularPages "Section" "pages") "Weight" }}
        <li>
          <a href="{{ .RelPermalink }}">
            <h3>{{ .LinkTitle }}</h3>
            {{ with .Params.summary }}<p>{{ . }}</p>{{ end }}
            {{ if .Params.tags }}
              <div class="taxonomy-list">
                {{ range first 3 .Params.tags }}
                  <span class="tag">{{ . }}</span>
                {{ end }}
              </div>
            {{ end }}
          </a>
        </li>
      {{ end }}
    </ul>
  </section>

  {{ if .Site.Taxonomies.tags }}
    <section class="tags-overview">
      <h2>🏷️ Browse by Topic</h2>
      <div class="taxonomy-list">
        {{ range .Site.Taxonomies.tags.ByCount }}
          <a href="{{ "/tags/" | relURL }}{{ .Name | urlize }}/" class="tag">
            {{ .Name }} ({{ .Count }})
          </a>
        {{ end }}
      </div>
    </section>
  {{ end }}
{{ end }}
