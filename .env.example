# Secure Notes Application Environment Configuration
# Copy this file to .env and update with your values

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================

# PostgreSQL password (REQUIRED: Use a strong password)
POSTGRES_PASSWORD=your_secure_postgres_password_here

# Database connection URL
# Development (no SSL): postgres://postgres:password@localhost:5432/notes?sslmode=disable
# Production (with SSL): postgres://postgres:password@postgres:5432/notes?sslmode=require
DATABASE_URL=postgres://postgres:${POSTGRES_PASSWORD}@localhost:5432/notes?sslmode=disable

# ============================================================================
# REDIS CONFIGURATION
# ============================================================================

# Redis password (REQUIRED: Use a strong password)
REDIS_PASSWORD=your_secure_redis_password_here

# Redis connection URL
# Development: localhost:6379 (when running locally)
# Docker: redis:6379 (when using docker-compose)
REDIS_URL=localhost:6379

# ============================================================================
# SECURITY KEYS (CRITICAL: Change these for production)
# ============================================================================

# JWT Secret Key (REQUIRED: Must be at least 64 characters for production)
# Generate with: openssl rand -base64 64
JWT_SECRET=your_64_character_jwt_secret_key_here_change_for_production

# Server Encryption Key (REQUIRED: Must be exactly 32 characters)
# Generate with: openssl rand -base64 32
SERVER_ENCRYPTION_KEY=your_32_character_encryption_key_here

# ============================================================================
# CORS AND FRONTEND CONFIGURATION
# ============================================================================

# Allowed CORS origins (comma-separated list)
# Development: Include all local development ports
# Production: Only include your production domains
CORS_ORIGINS=http://localhost:3000,http://localhost:5173,http://localhost:8080

# Frontend API URL (used by the frontend to connect to backend)
# Development: http://localhost:8080
# Production: https://your-domain.com/api or your actual backend URL
VITE_API_URL=http://localhost:8080

# ============================================================================
# APPLICATION SETTINGS
# ============================================================================

# Server port (default: 8080)
PORT=8080

# Enable/disable new user registration (true/false)
# Set to false to disable public registration and make the app invite-only
ENABLE_REGISTRATION=true

# ============================================================================
# DEFAULT ADMIN USER CONFIGURATION
# ============================================================================

# Enable/disable automatic creation of default admin user (true/false)
# When enabled, creates an admin user if no users exist in the database
ENABLE_DEFAULT_ADMIN=true

# Default admin email address
# Change this to your preferred admin email
DEFAULT_ADMIN_EMAIL=admin@leaflock.app

# Default admin password
# SECURITY WARNING: Change this immediately after first login!
# Generate a secure password with: openssl rand -base64 32
#
# IMPORTANT: For passwords with special characters like #, &, $, !, @, etc:
# - DO NOT wrap in quotes (docker-compose will include the quotes as part of the password)
# - Special characters are supported directly
# - Example: DEFAULT_ADMIN_PASSWORD=My#P@ssw0rd&123! (correct)
# - NOT: DEFAULT_ADMIN_PASSWORD="My#P@ssw0rd&123!" (incorrect - includes quotes)
DEFAULT_ADMIN_PASSWORD=AdminPass123!

# ============================================================================
# SSL/TLS CONFIGURATION (for production)
# ============================================================================

# SSL Domain name for certificate generation
SSL_DOMAIN=your-domain.com

# Additional domain names for SSL certificate (comma-separated)
SSL_ADDITIONAL_DOMAINS=www.your-domain.com,api.your-domain.com

# SSL Certificate details (optional, used for certificate generation)
SSL_COUNTRY=US
SSL_STATE=State
SSL_CITY=City
SSL_ORG=YourOrganization
SSL_OU=IT Department

# ============================================================================
# PRODUCTION DEPLOYMENT PATHS
# ============================================================================

# Host paths for production data persistence
POSTGRES_DATA_PATH=/var/lib/secure-notes/postgres
REDIS_DATA_PATH=/var/lib/secure-notes/redis

# ============================================================================
# SECURITY NOTES
# ============================================================================
#
# 1. NEVER commit the actual .env file to version control
# 2. Use strong, randomly generated passwords and keys
# 3. For production, use sslmode=require in DATABASE_URL
# 4. Store production secrets in a secure secret management system
# 5. Regularly rotate passwords and encryption keys
# 6. Use HTTPS in production (enable SSL in nginx configuration)
# 7. Restrict CORS_ORIGINS to only necessary domains in production
#
# ============================================================================
# MONITORING AND BACKUP CONFIGURATION
# ============================================================================

# Enable/disable Prometheus metrics endpoint (true/false)
ENABLE_METRICS=true

# S3 backup configuration
BACKUP_S3_ENDPOINT=https://s3.amazonaws.com
BACKUP_S3_BUCKET=your-backup-bucket-name
BACKUP_S3_ACCESS_KEY=your_s3_access_key
BACKUP_S3_SECRET_KEY=your_s3_secret_key
BACKUP_S3_REGION=us-east-1

# Backup encryption key (32 characters for AES-256)
BACKUP_ENCRYPTION_KEY=your_32_character_backup_encryption_key

# Backup retention settings
BACKUP_RETENTION_DAYS=30
BACKUP_SCHEDULE=0 2 * * * # Daily at 2 AM (cron format)

# Enable/disable automated backups (true/false)
ENABLE_BACKUPS=true

# Generate secure values:
# - PostgreSQL password: openssl rand -base64 32
# - Redis password: openssl rand -base64 32
# - JWT secret: openssl rand -base64 64
# - Encryption key: openssl rand -base64 32
# - Backup encryption key: openssl rand -base64 32
#
# ============================================================================
